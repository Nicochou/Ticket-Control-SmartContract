{"ast":null,"code":"import _classCallCheck from \"D:\\\\Projet\\\\ecole_etna\\\\final-project-feamcor\\\\bileto\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\Projet\\\\ecole_etna\\\\final-project-feamcor\\\\bileto\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"D:\\\\Projet\\\\ecole_etna\\\\final-project-feamcor\\\\bileto\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"D:\\\\Projet\\\\ecole_etna\\\\final-project-feamcor\\\\bileto\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"D:\\\\Projet\\\\ecole_etna\\\\final-project-feamcor\\\\bileto\\\\client\\\\src\\\\StoreInfo.jsx\";\nimport React, { Component } from \"react\";\n\nvar StoreInfo = /*#__PURE__*/function (_Component) {\n  _inherits(StoreInfo, _Component);\n\n  var _super = _createSuper(StoreInfo);\n\n  function StoreInfo() {\n    var _this;\n\n    _classCallCheck(this, StoreInfo);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      dataKey: null\n    };\n    _this.storeStateLabels = [\"0-CREATED\", \"1-OPEN\", \"2-SUSPENDED\", \"3-CLOSED\"];\n    return _this;\n  }\n\n  _createClass(StoreInfo, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var Bileto = this.props.drizzle.contracts.Bileto;\n      var dataKey = Bileto.methods.fetchStoreInfo.cacheCall();\n      this.setState({\n        dataKey\n      });\n    }\n  }, {\n    key: \"formatWeiToEther\",\n    value: function formatWeiToEther(_amount) {\n      var _output = !_amount ? \"???\" : this.props.drizzle.web3.utils.fromWei(_amount.toString(), \"ether\");\n\n      _output += \" ETHER\";\n      return _output;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props$drizzleSt = this.props.drizzleState,\n          drizzleStatus = _this$props$drizzleSt.drizzleStatus,\n          web3 = _this$props$drizzleSt.web3;\n\n      if (!drizzleStatus.initialized || web3.status !== \"initialized\") {\n        return \"Loading...\";\n      }\n\n      var Bileto = this.props.drizzleState.contracts.Bileto;\n      var storeInfo = Bileto.fetchStoreInfo[this.state.dataKey];\n\n      if (!storeInfo || !storeInfo.value) {\n        return \"Loading...\";\n      }\n\n      var _storeInfo$value = storeInfo.value,\n          storeStatus = _storeInfo$value.storeStatus,\n          storeName = _storeInfo$value.storeName,\n          storeOwner = _storeInfo$value.storeOwner,\n          storeSettledBalance = _storeInfo$value.storeSettledBalance,\n          storeExcessBalance = _storeInfo$value.storeExcessBalance,\n          storeRefundableBalance = _storeInfo$value.storeRefundableBalance,\n          storeCounterEvents = _storeInfo$value.storeCounterEvents,\n          storeCounterPurchases = _storeInfo$value.storeCounterPurchases;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card shadow h-100\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"h5\", {\n        className: \"card-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 9\n        }\n      }, \"Store: \", /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 18\n        }\n      }, storeName)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"list-group list-group-flush\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"li\", {\n        className: \"list-group-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 15\n        }\n      }, \"Status: \"), this.storeStateLabels[storeStatus]), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"list-group-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 15\n        }\n      }, \"Owner: \"), storeOwner), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"list-group-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 15\n        }\n      }, \"Settled balance: \"), this.formatWeiToEther(storeSettledBalance)), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"list-group-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 15\n        }\n      }, \"Excess balance: \"), this.formatWeiToEther(storeExcessBalance)), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"list-group-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 15\n        }\n      }, \"Refundable balance: \"), this.formatWeiToEther(storeRefundableBalance)), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"list-group-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 15\n        }\n      }, \"# of Events created so far: \"), storeCounterEvents), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"list-group-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 15\n        }\n      }, \"# of Purchases completed so far: \"), storeCounterPurchases))));\n    }\n  }]);\n\n  return StoreInfo;\n}(Component);\n\nexport default StoreInfo;","map":{"version":3,"sources":["D:/Projet/ecole_etna/final-project-feamcor/bileto/client/src/StoreInfo.jsx"],"names":["React","Component","StoreInfo","state","dataKey","storeStateLabels","Bileto","props","drizzle","contracts","methods","fetchStoreInfo","cacheCall","setState","_amount","_output","web3","utils","fromWei","toString","drizzleState","drizzleStatus","initialized","status","storeInfo","value","storeStatus","storeName","storeOwner","storeSettledBalance","storeExcessBalance","storeRefundableBalance","storeCounterEvents","storeCounterPurchases","formatWeiToEther"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nclass StoreInfo extends Component {\r\n  state = { dataKey: null };\r\n  storeStateLabels = [\"0-CREATED\", \"1-OPEN\", \"2-SUSPENDED\", \"3-CLOSED\"];\r\n\r\n  componentDidMount() {\r\n    const { Bileto } = this.props.drizzle.contracts;\r\n    const dataKey = Bileto.methods.fetchStoreInfo.cacheCall();\r\n    this.setState({ dataKey });\r\n  }\r\n\r\n  formatWeiToEther(_amount) {\r\n    let _output = !_amount\r\n      ? \"???\"\r\n      : this.props.drizzle.web3.utils.fromWei(_amount.toString(), \"ether\");\r\n    _output += \" ETHER\";\r\n    return _output;\r\n  }\r\n\r\n  render() {\r\n    const { drizzleStatus, web3 } = this.props.drizzleState;\r\n    if (!drizzleStatus.initialized || web3.status !== \"initialized\") {\r\n      return \"Loading...\";\r\n    }\r\n\r\n    const { Bileto } = this.props.drizzleState.contracts;\r\n\r\n    const storeInfo = Bileto.fetchStoreInfo[this.state.dataKey];\r\n    if (!storeInfo || !storeInfo.value) {\r\n      return \"Loading...\";\r\n    }\r\n\r\n    const {\r\n      storeStatus,\r\n      storeName,\r\n      storeOwner,\r\n      storeSettledBalance,\r\n      storeExcessBalance,\r\n      storeRefundableBalance,\r\n      storeCounterEvents,\r\n      storeCounterPurchases\r\n    } = storeInfo.value;\r\n\r\n    return (\r\n      <div className=\"card shadow h-100\">\r\n        <h5 className=\"card-header\">\r\n          Store: <strong>{storeName}</strong>\r\n        </h5>\r\n        <div className=\"card-body\">\r\n          <ul className=\"list-group list-group-flush\">\r\n            <li className=\"list-group-item\">\r\n              <strong>Status: </strong>\r\n              {this.storeStateLabels[storeStatus]}\r\n            </li>\r\n            <li className=\"list-group-item\">\r\n              <strong>Owner: </strong>\r\n              {storeOwner}\r\n            </li>\r\n            <li className=\"list-group-item\">\r\n              <strong>Settled balance: </strong>\r\n              {this.formatWeiToEther(storeSettledBalance)}\r\n            </li>\r\n            <li className=\"list-group-item\">\r\n              <strong>Excess balance: </strong>\r\n              {this.formatWeiToEther(storeExcessBalance)}\r\n            </li>\r\n            <li className=\"list-group-item\">\r\n              <strong>Refundable balance: </strong>\r\n              {this.formatWeiToEther(storeRefundableBalance)}\r\n            </li>\r\n            <li className=\"list-group-item\">\r\n              <strong># of Events created so far: </strong>\r\n              {storeCounterEvents}\r\n            </li>\r\n            <li className=\"list-group-item\">\r\n              <strong># of Purchases completed so far: </strong>\r\n              {storeCounterPurchases}\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default StoreInfo;\r\n"]},"metadata":{},"sourceType":"module"}