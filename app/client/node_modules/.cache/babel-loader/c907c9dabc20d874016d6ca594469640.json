{"ast":null,"code":"import _classCallCheck from \"D:\\\\Projets\\\\group-790626\\\\jobillet\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\Projets\\\\group-790626\\\\jobillet\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"D:\\\\Projets\\\\group-790626\\\\jobillet\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"D:\\\\Projets\\\\group-790626\\\\jobillet\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"D:\\\\Projets\\\\group-790626\\\\jobillet\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"D:\\\\Projets\\\\group-790626\\\\jobillet\\\\client\\\\src\\\\CancelPurchase.jsx\";\nimport React, { Component } from \"react\";\n\nvar CancelPurchase = /*#__PURE__*/function (_Component) {\n  _inherits(CancelPurchase, _Component);\n\n  var _super = _createSuper(CancelPurchase);\n\n  function CancelPurchase(props) {\n    var _this;\n\n    _classCallCheck(this, CancelPurchase);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      stackId: null,\n      _externalId: \"\",\n      _customerId: \"\"\n    };\n\n    _this.handleOnClick = function (_event) {\n      var Bileto = _this.props.drizzle.contracts.Bileto;\n      var stackId = Bileto.methods.cancelPurchase.cacheSend(_this.props.purchaseId, _this.state._externalId, _this.state._customerId);\n\n      _this.setState({\n        stackId\n      });\n    };\n\n    _this.handleOnChange = function (_event) {\n      _this.setState({\n        [_event.target.name]: _event.target.value\n      });\n    };\n\n    _this.getTxStatus = function () {\n      var _this$props$drizzleSt = _this.props.drizzleState,\n          transactions = _this$props$drizzleSt.transactions,\n          transactionStack = _this$props$drizzleSt.transactionStack;\n      var txHash = transactionStack[_this.state.stackId];\n      if (!txHash) return \"...\"; // console.log(transactions[txHash]);\n\n      return transactions[txHash].status;\n    };\n\n    _this.handleOnChange = _this.handleOnChange.bind(_assertThisInitialized(_this));\n    _this.handleOnClick = _this.handleOnClick.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(CancelPurchase, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props$drizzleSt2 = this.props.drizzleState,\n          drizzleStatus = _this$props$drizzleSt2.drizzleStatus,\n          web3 = _this$props$drizzleSt2.web3;\n\n      if (!drizzleStatus.initialized || web3.status !== \"initialized\") {\n        return \"Loading...\";\n      }\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card shadow border-dark text-center h-100\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-danger btn-block\",\n        onClick: this.handleOnClick,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 13\n        }\n      }, \"CANCEL\"), \" purchase #\", this.props.purchaseId)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        key: \"_externalId\",\n        name: \"_externalId\",\n        value: this.state._externalId,\n        onChange: this.handleOnChange,\n        className: \"form-control\",\n        placeholder: \"Purchase External ID\",\n        \"aria-label\": \"Purchase External ID\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        key: \"_customerId\",\n        name: \"_customerId\",\n        value: this.state._customerId,\n        onChange: this.handleOnChange,\n        min: \"1\",\n        className: \"form-control\",\n        placeholder: \"Customer ID\",\n        \"aria-label\": \"Customer Id\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }\n      })), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"card-footer font-weight-bold text-uppercase\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 9\n        }\n      }, this.getTxStatus()));\n    }\n  }]);\n\n  return CancelPurchase;\n}(Component);\n\nexport default CancelPurchase;","map":{"version":3,"sources":["D:/Projets/group-790626/jobillet/client/src/CancelPurchase.jsx"],"names":["React","Component","CancelPurchase","props","state","stackId","_externalId","_customerId","handleOnClick","_event","Bileto","drizzle","contracts","methods","cancelPurchase","cacheSend","purchaseId","setState","handleOnChange","target","name","value","getTxStatus","drizzleState","transactions","transactionStack","txHash","status","bind","drizzleStatus","web3","initialized"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nclass CancelPurchase extends Component {\r\n  state = { stackId: null, _externalId: \"\", _customerId: \"\" };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleOnChange = this.handleOnChange.bind(this);\r\n    this.handleOnClick = this.handleOnClick.bind(this);\r\n  }\r\n\r\n  handleOnClick = _event => {\r\n    const { Bileto } = this.props.drizzle.contracts;\r\n    const stackId = Bileto.methods.cancelPurchase.cacheSend(\r\n      this.props.purchaseId,\r\n      this.state._externalId,\r\n      this.state._customerId\r\n    );\r\n    this.setState({ stackId });\r\n  };\r\n\r\n  handleOnChange = _event => {\r\n    this.setState({ [_event.target.name]: _event.target.value });\r\n  };\r\n\r\n  getTxStatus = () => {\r\n    const { transactions, transactionStack } = this.props.drizzleState;\r\n    const txHash = transactionStack[this.state.stackId];\r\n    if (!txHash) return \"...\";\r\n    // console.log(transactions[txHash]);\r\n    return transactions[txHash].status;\r\n  };\r\n\r\n  render() {\r\n    const { drizzleStatus, web3 } = this.props.drizzleState;\r\n    if (!drizzleStatus.initialized || web3.status !== \"initialized\") {\r\n      return \"Loading...\";\r\n    }\r\n\r\n    return (\r\n      <div className=\"card shadow border-dark text-center h-100\">\r\n        <div className=\"card-header\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-danger btn-block\"\r\n            onClick={this.handleOnClick}\r\n          >\r\n            <strong>CANCEL</strong> purchase #{this.props.purchaseId}\r\n          </button>\r\n        </div>\r\n        <div className=\"card-body\">\r\n          <input\r\n            type=\"text\"\r\n            key=\"_externalId\"\r\n            name=\"_externalId\"\r\n            value={this.state._externalId}\r\n            onChange={this.handleOnChange}\r\n            className=\"form-control\"\r\n            placeholder=\"Purchase External ID\"\r\n            aria-label=\"Purchase External ID\"\r\n            required\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            key=\"_customerId\"\r\n            name=\"_customerId\"\r\n            value={this.state._customerId}\r\n            onChange={this.handleOnChange}\r\n            min=\"1\"\r\n            className=\"form-control\"\r\n            placeholder=\"Customer ID\"\r\n            aria-label=\"Customer Id\"\r\n            required\r\n          />\r\n        </div>\r\n        <span className=\"card-footer font-weight-bold text-uppercase\">\r\n          {this.getTxStatus()}\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CancelPurchase;\r\n"]},"metadata":{},"sourceType":"module"}