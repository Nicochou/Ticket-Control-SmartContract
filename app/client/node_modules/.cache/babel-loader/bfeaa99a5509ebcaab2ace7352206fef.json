{"ast":null,"code":"import _classCallCheck from \"D:\\\\Projet\\\\ecole_etna\\\\final-project-feamcor\\\\bileto\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\Projet\\\\ecole_etna\\\\final-project-feamcor\\\\bileto\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"D:\\\\Projet\\\\ecole_etna\\\\final-project-feamcor\\\\bileto\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"D:\\\\Projet\\\\ecole_etna\\\\final-project-feamcor\\\\bileto\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"D:\\\\Projet\\\\ecole_etna\\\\final-project-feamcor\\\\bileto\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"D:\\\\Projet\\\\ecole_etna\\\\final-project-feamcor\\\\bileto\\\\client\\\\src\\\\CreateEvent.jsx\";\nimport React, { Component } from \"react\";\n\nvar CreateEvent = /*#__PURE__*/function (_Component) {\n  _inherits(CreateEvent, _Component);\n\n  var _super = _createSuper(CreateEvent);\n\n  function CreateEvent(props) {\n    var _this;\n\n    _classCallCheck(this, CreateEvent);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      stackId: null,\n      _externalId: \"\",\n      _organizer: \"\",\n      _name: \"\",\n      _storeIncentive: \"\",\n      _ticketPrice: \"\",\n      _ticketsOnSale: \"\"\n    };\n\n    _this.handleOnClick = function (_event) {\n      var Bileto = _this.props.drizzle.contracts.Bileto;\n\n      var _incentive = parseInt(_this.state._storeIncentive, 10) * 100;\n\n      var stackId = Bileto.methods.createEvent.cacheSend(_this.state._externalId, _this.state._organizer, _this.state._name, _incentive.toString(), _this.props.drizzle.web3.utils.toWei(_this.state._ticketPrice, \"ether\"), _this.state._ticketsOnSale);\n\n      _this.setState({\n        stackId\n      });\n    };\n\n    _this.handleOnChange = function (_event) {\n      _this.setState({\n        [_event.target.name]: _event.target.value\n      });\n    };\n\n    _this.getTxStatus = function () {\n      var _this$props$drizzleSt = _this.props.drizzleState,\n          transactions = _this$props$drizzleSt.transactions,\n          transactionStack = _this$props$drizzleSt.transactionStack;\n      var txHash = transactionStack[_this.state.stackId];\n      if (!txHash) return \"...\"; // console.log(transactions[txHash]);\n\n      if (transactions[txHash].status === \"success\") {\n        var eventId = transactions[txHash].receipt.events.EventCreated.returnValues._id;\n        return \"EVENT #\".concat(eventId);\n      } else {\n        return transactions[txHash].status;\n      }\n    };\n\n    _this.handleOnChange = _this.handleOnChange.bind(_assertThisInitialized(_this));\n    _this.handleOnClick = _this.handleOnClick.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(CreateEvent, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props$drizzleSt2 = this.props.drizzleState,\n          drizzleStatus = _this$props$drizzleSt2.drizzleStatus,\n          web3 = _this$props$drizzleSt2.web3;\n\n      if (!drizzleStatus.initialized || web3.status !== \"initialized\") {\n        return \"Loading...\";\n      }\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card shadow text-white bg-info h-100\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"h5\", {\n        className: \"card-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 9\n        }\n      }, \"CREATE event\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group-prepend\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"input-group-text\",\n        id: \"labelEventName\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 15\n        }\n      }, \"name\")), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        key: \"_name\",\n        name: \"_name\",\n        value: this.state._name,\n        onChange: this.handleOnChange,\n        className: \"form-control\",\n        placeholder: \"Event Name\",\n        \"aria-label\": \"Event Name\",\n        \"aria-describedby\": \"labelEventName\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group-prepend\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"input-group-text\",\n        id: \"labelExternalId\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 15\n        }\n      }, \"external id\")), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        key: \"_externalId\",\n        name: \"_externalId\",\n        value: this.state._externalId,\n        onChange: this.handleOnChange,\n        className: \"form-control\",\n        placeholder: \"Event External ID\",\n        \"aria-label\": \"Event External ID\",\n        \"aria-describedby\": \"labelExternalId\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group-prepend\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"input-group-text\",\n        id: \"labelOrganizer\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 15\n        }\n      }, \"organizer\")), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        key: \"_organizer\",\n        name: \"_organizer\",\n        value: this.state._organizer,\n        onChange: this.handleOnChange,\n        className: \"form-control\",\n        placeholder: \"Event Organizer Address\",\n        \"aria-label\": \"Event Organizer Address\",\n        \"aria-describedby\": \"labelOrganizer\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group-prepend\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"input-group-text\",\n        id: \"labelTicketsOnSale\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 15\n        }\n      }, \"tickets on sale\")), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        key: \"_ticketsOnSale\",\n        name: \"_ticketsOnSale\",\n        value: this.state._ticketsOnSale,\n        onChange: this.handleOnChange,\n        min: \"1\",\n        className: \"form-control\",\n        placeholder: \"Quantity of Tickets on Sale\",\n        \"aria-label\": \"Quantity of Tickets on Sale\",\n        \"aria-describedby\": \"labelTicketsOnSale\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group-prepend\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"input-group-text\",\n        id: \"labelTicketPrice\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 15\n        }\n      }, \"ticket price (in ether)\")), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        key: \"_ticketPrice\",\n        name: \"_ticketPrice\",\n        value: this.state._ticketPrice,\n        onChange: this.handleOnChange,\n        min: \"0\",\n        max: \"100\",\n        step: \"0.01\",\n        className: \"form-control\",\n        placeholder: \"Price of One Ticket\",\n        \"aria-label\": \"Price of One Ticket\",\n        \"aria-describedby\": \"labelTicketPrice\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group-prepend\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"input-group-text\",\n        id: \"labelStoreIncentive\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 15\n        }\n      }, \"store incentive (in %)\")), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        key: \"_storeIncentive\",\n        name: \"_storeIncentive\",\n        value: this.state._storeIncentive,\n        onChange: this.handleOnChange,\n        min: \"0\",\n        max: \"100\",\n        step: \"1\",\n        className: \"form-control\",\n        placeholder: \"Percentage Paid to Store as Incentive\",\n        \"aria-label\": \"Percentage Paid to Store as Incentive\",\n        \"aria-describedby\": \"labelStoreIncentive\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-light\",\n        onClick: this.handleOnClick,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }\n      }, \"submit\")), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"card-footer font-weight-bold text-uppercase\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 9\n        }\n      }, this.getTxStatus()));\n    }\n  }]);\n\n  return CreateEvent;\n}(Component);\n\nexport default CreateEvent;","map":{"version":3,"sources":["D:/Projet/ecole_etna/final-project-feamcor/bileto/client/src/CreateEvent.jsx"],"names":["React","Component","CreateEvent","props","state","stackId","_externalId","_organizer","_name","_storeIncentive","_ticketPrice","_ticketsOnSale","handleOnClick","_event","Bileto","drizzle","contracts","_incentive","parseInt","methods","createEvent","cacheSend","toString","web3","utils","toWei","setState","handleOnChange","target","name","value","getTxStatus","drizzleState","transactions","transactionStack","txHash","status","eventId","receipt","events","EventCreated","returnValues","_id","bind","drizzleStatus","initialized"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nclass CreateEvent extends Component {\r\n  state = {\r\n    stackId: null,\r\n    _externalId: \"\",\r\n    _organizer: \"\",\r\n    _name: \"\",\r\n    _storeIncentive: \"\",\r\n    _ticketPrice: \"\",\r\n    _ticketsOnSale: \"\"\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleOnChange = this.handleOnChange.bind(this);\r\n    this.handleOnClick = this.handleOnClick.bind(this);\r\n  }\r\n\r\n  handleOnClick = _event => {\r\n    const { Bileto } = this.props.drizzle.contracts;\r\n    const _incentive = parseInt(this.state._storeIncentive, 10) * 100;\r\n    const stackId = Bileto.methods.createEvent.cacheSend(\r\n      this.state._externalId,\r\n      this.state._organizer,\r\n      this.state._name,\r\n      _incentive.toString(),\r\n      this.props.drizzle.web3.utils.toWei(this.state._ticketPrice, \"ether\"),\r\n      this.state._ticketsOnSale\r\n    );\r\n    this.setState({ stackId });\r\n  };\r\n\r\n  handleOnChange = _event => {\r\n    this.setState({ [_event.target.name]: _event.target.value });\r\n  };\r\n\r\n  getTxStatus = () => {\r\n    const { transactions, transactionStack } = this.props.drizzleState;\r\n    const txHash = transactionStack[this.state.stackId];\r\n    if (!txHash) return \"...\";\r\n    // console.log(transactions[txHash]);\r\n    if (transactions[txHash].status === \"success\") {\r\n      const eventId =\r\n        transactions[txHash].receipt.events.EventCreated.returnValues._id;\r\n      return `EVENT #${eventId}`;\r\n    } else {\r\n      return transactions[txHash].status;\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { drizzleStatus, web3 } = this.props.drizzleState;\r\n    if (!drizzleStatus.initialized || web3.status !== \"initialized\") {\r\n      return \"Loading...\";\r\n    }\r\n\r\n    return (\r\n      <div className=\"card shadow text-white bg-info h-100\">\r\n        <h5 className=\"card-header\">CREATE event</h5>\r\n        <div className=\"card-body\">\r\n          <div className=\"input-group mb-2\">\r\n            <div className=\"input-group-prepend\">\r\n              <span className=\"input-group-text\" id=\"labelEventName\">\r\n                name\r\n              </span>\r\n            </div>\r\n            <input\r\n              type=\"text\"\r\n              key=\"_name\"\r\n              name=\"_name\"\r\n              value={this.state._name}\r\n              onChange={this.handleOnChange}\r\n              className=\"form-control\"\r\n              placeholder=\"Event Name\"\r\n              aria-label=\"Event Name\"\r\n              aria-describedby=\"labelEventName\"\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"input-group mb-2\">\r\n            <div className=\"input-group-prepend\">\r\n              <span className=\"input-group-text\" id=\"labelExternalId\">\r\n                external id\r\n              </span>\r\n            </div>\r\n            <input\r\n              type=\"text\"\r\n              key=\"_externalId\"\r\n              name=\"_externalId\"\r\n              value={this.state._externalId}\r\n              onChange={this.handleOnChange}\r\n              className=\"form-control\"\r\n              placeholder=\"Event External ID\"\r\n              aria-label=\"Event External ID\"\r\n              aria-describedby=\"labelExternalId\"\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"input-group mb-2\">\r\n            <div className=\"input-group-prepend\">\r\n              <span className=\"input-group-text\" id=\"labelOrganizer\">\r\n                organizer\r\n              </span>\r\n            </div>\r\n            <input\r\n              type=\"text\"\r\n              key=\"_organizer\"\r\n              name=\"_organizer\"\r\n              value={this.state._organizer}\r\n              onChange={this.handleOnChange}\r\n              className=\"form-control\"\r\n              placeholder=\"Event Organizer Address\"\r\n              aria-label=\"Event Organizer Address\"\r\n              aria-describedby=\"labelOrganizer\"\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"input-group mb-2\">\r\n            <div className=\"input-group-prepend\">\r\n              <span className=\"input-group-text\" id=\"labelTicketsOnSale\">\r\n                tickets on sale\r\n              </span>\r\n            </div>\r\n            <input\r\n              type=\"number\"\r\n              key=\"_ticketsOnSale\"\r\n              name=\"_ticketsOnSale\"\r\n              value={this.state._ticketsOnSale}\r\n              onChange={this.handleOnChange}\r\n              min=\"1\"\r\n              className=\"form-control\"\r\n              placeholder=\"Quantity of Tickets on Sale\"\r\n              aria-label=\"Quantity of Tickets on Sale\"\r\n              aria-describedby=\"labelTicketsOnSale\"\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"input-group mb-2\">\r\n            <div className=\"input-group-prepend\">\r\n              <span className=\"input-group-text\" id=\"labelTicketPrice\">\r\n                ticket price (in ether)\r\n              </span>\r\n            </div>\r\n            <input\r\n              type=\"number\"\r\n              key=\"_ticketPrice\"\r\n              name=\"_ticketPrice\"\r\n              value={this.state._ticketPrice}\r\n              onChange={this.handleOnChange}\r\n              min=\"0\"\r\n              max=\"100\"\r\n              step=\"0.01\"\r\n              className=\"form-control\"\r\n              placeholder=\"Price of One Ticket\"\r\n              aria-label=\"Price of One Ticket\"\r\n              aria-describedby=\"labelTicketPrice\"\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"input-group mb-2\">\r\n            <div className=\"input-group-prepend\">\r\n              <span className=\"input-group-text\" id=\"labelStoreIncentive\">\r\n                store incentive (in %)\r\n              </span>\r\n            </div>\r\n            <input\r\n              type=\"number\"\r\n              key=\"_storeIncentive\"\r\n              name=\"_storeIncentive\"\r\n              value={this.state._storeIncentive}\r\n              onChange={this.handleOnChange}\r\n              min=\"0\"\r\n              max=\"100\"\r\n              step=\"1\"\r\n              className=\"form-control\"\r\n              placeholder=\"Percentage Paid to Store as Incentive\"\r\n              aria-label=\"Percentage Paid to Store as Incentive\"\r\n              aria-describedby=\"labelStoreIncentive\"\r\n              required\r\n            />\r\n          </div>\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-light\"\r\n            onClick={this.handleOnClick}\r\n          >\r\n            submit\r\n          </button>\r\n        </div>\r\n        <span className=\"card-footer font-weight-bold text-uppercase\">\r\n          {this.getTxStatus()}\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CreateEvent;\r\n"]},"metadata":{},"sourceType":"module"}