{"ast":null,"code":"import _classCallCheck from \"D:\\\\Projet\\\\ecole_etna\\\\final-project-feamcor\\\\bileto\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\Projet\\\\ecole_etna\\\\final-project-feamcor\\\\bileto\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"D:\\\\Projet\\\\ecole_etna\\\\final-project-feamcor\\\\bileto\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"D:\\\\Projet\\\\ecole_etna\\\\final-project-feamcor\\\\bileto\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"D:\\\\Projet\\\\ecole_etna\\\\final-project-feamcor\\\\bileto\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"D:\\\\Projet\\\\ecole_etna\\\\final-project-feamcor\\\\bileto\\\\client\\\\src\\\\PurchaseTickets.jsx\";\nimport React, { Component } from \"react\";\n\nvar PurchaseTickets = /*#__PURE__*/function (_Component) {\n  _inherits(PurchaseTickets, _Component);\n\n  var _super = _createSuper(PurchaseTickets);\n\n  function PurchaseTickets(props) {\n    var _this;\n\n    _classCallCheck(this, PurchaseTickets);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      stackId: null,\n      _quantity: \"\",\n      _externalId: \"\",\n      _customerId: \"\",\n      _ticketPrice: \"\"\n    };\n\n    _this.handleOnClick = function (_event) {\n      var Bileto = _this.props.drizzle.contracts.Bileto;\n      var quantity = parseInt(_this.state._quantity, 10);\n      var price = parseFloat(_this.state._ticketPrice);\n      var total = quantity * price;\n\n      var value = _this.props.drizzle.web3.utils.toWei(total.toString(), \"ether\");\n\n      var stackId = Bileto.methods.purchaseTickets.cacheSend(_this.props.eventId, _this.state._quantity, _this.state._externalId, new Date().getTime().toString(), _this.state._customerId, {\n        value\n      });\n\n      _this.setState({\n        stackId\n      });\n    };\n\n    _this.handleOnChange = function (_event) {\n      _this.setState({\n        [_event.target.name]: _event.target.value\n      });\n    };\n\n    _this.getTxStatus = function () {\n      var _this$props$drizzleSt = _this.props.drizzleState,\n          transactions = _this$props$drizzleSt.transactions,\n          transactionStack = _this$props$drizzleSt.transactionStack;\n      var txHash = transactionStack[_this.state.stackId];\n      if (!txHash) return \"...\"; // console.log(transactions[txHash]);\n\n      if (transactions[txHash].status === \"success\") {\n        var purchaseId = transactions[txHash].receipt.events.PurchaseCompleted.returnValues._id;\n        return \"PURCHASE #\".concat(purchaseId);\n      } else {\n        return transactions[txHash].status;\n      }\n    };\n\n    _this.handleOnChange = _this.handleOnChange.bind(_assertThisInitialized(_this));\n    _this.handleOnClick = _this.handleOnClick.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(PurchaseTickets, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props$drizzleSt2 = this.props.drizzleState,\n          drizzleStatus = _this$props$drizzleSt2.drizzleStatus,\n          web3 = _this$props$drizzleSt2.web3;\n\n      if (!drizzleStatus.initialized || web3.status !== \"initialized\") {\n        return \"Loading...\";\n      }\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card shadow text-white bg-info h-100\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"h5\", {\n        className: \"card-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 9\n        }\n      }, \"PURCHASE tickets\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group-prepend\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"input-group-text\",\n        id: \"labelExternalId\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 15\n        }\n      }, \"external id\")), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        key: \"_externalId\",\n        name: \"_externalId\",\n        value: this.state._externalId,\n        onChange: this.handleOnChange,\n        className: \"form-control\",\n        placeholder: \"Purchase External ID\",\n        \"aria-label\": \"Purchase External ID\",\n        \"aria-describedby\": \"labelExternalId\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group-prepend\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"input-group-text\",\n        id: \"labelCustomerId\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 15\n        }\n      }, \"customer id\")), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        key: \"_customerId\",\n        name: \"_customerId\",\n        value: this.state._customerId,\n        onChange: this.handleOnChange,\n        min: \"1\",\n        className: \"form-control\",\n        placeholder: \"Customer ID\",\n        \"aria-label\": \"Customer Id\",\n        \"aria-describedby\": \"labelCustomerId\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group-prepend\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"input-group-text\",\n        id: \"labelQuantity\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 15\n        }\n      }, \"quantity\")), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        key: \"_quantity\",\n        name: \"_quantity\",\n        value: this.state._quantity,\n        onChange: this.handleOnChange,\n        className: \"form-control\",\n        placeholder: \"Quantity\",\n        \"aria-label\": \"Quantity\",\n        \"aria-describedby\": \"labelQuantity\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group-prepend\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"input-group-text\",\n        id: \"labelTicketPrice\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 15\n        }\n      }, \"ticket price (in ether)\")), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        key: \"_ticketPrice\",\n        name: \"_ticketPrice\",\n        value: this.state._ticketPrice,\n        onChange: this.handleOnChange,\n        min: \"0\",\n        max: \"100\",\n        step: \"0.01\",\n        className: \"form-control\",\n        placeholder: \"Price of One Ticket\",\n        \"aria-label\": \"Price of One Ticket\",\n        \"aria-describedby\": \"labelTicketPrice\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-light\",\n        onClick: this.handleOnClick,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }\n      }, \"submit\")), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"card-footer font-weight-bold text-uppercase\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 9\n        }\n      }, this.getTxStatus()));\n    }\n  }]);\n\n  return PurchaseTickets;\n}(Component);\n\nexport default PurchaseTickets;","map":{"version":3,"sources":["D:/Projet/ecole_etna/final-project-feamcor/bileto/client/src/PurchaseTickets.jsx"],"names":["React","Component","PurchaseTickets","props","state","stackId","_quantity","_externalId","_customerId","_ticketPrice","handleOnClick","_event","Bileto","drizzle","contracts","quantity","parseInt","price","parseFloat","total","value","web3","utils","toWei","toString","methods","purchaseTickets","cacheSend","eventId","Date","getTime","setState","handleOnChange","target","name","getTxStatus","drizzleState","transactions","transactionStack","txHash","status","purchaseId","receipt","events","PurchaseCompleted","returnValues","_id","bind","drizzleStatus","initialized"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nclass PurchaseTickets extends Component {\r\n  state = {\r\n    stackId: null,\r\n    _quantity: \"\",\r\n    _externalId: \"\",\r\n    _customerId: \"\",\r\n    _ticketPrice: \"\"\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleOnChange = this.handleOnChange.bind(this);\r\n    this.handleOnClick = this.handleOnClick.bind(this);\r\n  }\r\n\r\n  handleOnClick = _event => {\r\n    const { Bileto } = this.props.drizzle.contracts;\r\n    const quantity = parseInt(this.state._quantity, 10);\r\n    const price = parseFloat(this.state._ticketPrice);\r\n    const total = quantity * price;\r\n    const value = this.props.drizzle.web3.utils.toWei(\r\n      total.toString(),\r\n      \"ether\"\r\n    );\r\n    const stackId = Bileto.methods.purchaseTickets.cacheSend(\r\n      this.props.eventId,\r\n      this.state._quantity,\r\n      this.state._externalId,\r\n      new Date().getTime().toString(),\r\n      this.state._customerId,\r\n      { value }\r\n    );\r\n    this.setState({ stackId });\r\n  };\r\n\r\n  handleOnChange = _event => {\r\n    this.setState({ [_event.target.name]: _event.target.value });\r\n  };\r\n\r\n  getTxStatus = () => {\r\n    const { transactions, transactionStack } = this.props.drizzleState;\r\n    const txHash = transactionStack[this.state.stackId];\r\n    if (!txHash) return \"...\";\r\n    // console.log(transactions[txHash]);\r\n    if (transactions[txHash].status === \"success\") {\r\n      const purchaseId =\r\n        transactions[txHash].receipt.events.PurchaseCompleted.returnValues._id;\r\n      return `PURCHASE #${purchaseId}`;\r\n    } else {\r\n      return transactions[txHash].status;\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { drizzleStatus, web3 } = this.props.drizzleState;\r\n    if (!drizzleStatus.initialized || web3.status !== \"initialized\") {\r\n      return \"Loading...\";\r\n    }\r\n\r\n    return (\r\n      <div className=\"card shadow text-white bg-info h-100\">\r\n        <h5 className=\"card-header\">PURCHASE tickets</h5>\r\n        <div className=\"card-body\">\r\n          <div className=\"input-group mb-2\">\r\n            <div className=\"input-group-prepend\">\r\n              <span className=\"input-group-text\" id=\"labelExternalId\">\r\n                external id\r\n              </span>\r\n            </div>\r\n            <input\r\n              type=\"text\"\r\n              key=\"_externalId\"\r\n              name=\"_externalId\"\r\n              value={this.state._externalId}\r\n              onChange={this.handleOnChange}\r\n              className=\"form-control\"\r\n              placeholder=\"Purchase External ID\"\r\n              aria-label=\"Purchase External ID\"\r\n              aria-describedby=\"labelExternalId\"\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"input-group mb-2\">\r\n            <div className=\"input-group-prepend\">\r\n              <span className=\"input-group-text\" id=\"labelCustomerId\">\r\n                customer id\r\n              </span>\r\n            </div>\r\n            <input\r\n              type=\"text\"\r\n              key=\"_customerId\"\r\n              name=\"_customerId\"\r\n              value={this.state._customerId}\r\n              onChange={this.handleOnChange}\r\n              min=\"1\"\r\n              className=\"form-control\"\r\n              placeholder=\"Customer ID\"\r\n              aria-label=\"Customer Id\"\r\n              aria-describedby=\"labelCustomerId\"\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"input-group mb-2\">\r\n            <div className=\"input-group-prepend\">\r\n              <span className=\"input-group-text\" id=\"labelQuantity\">\r\n                quantity\r\n              </span>\r\n            </div>\r\n            <input\r\n              type=\"number\"\r\n              key=\"_quantity\"\r\n              name=\"_quantity\"\r\n              value={this.state._quantity}\r\n              onChange={this.handleOnChange}\r\n              className=\"form-control\"\r\n              placeholder=\"Quantity\"\r\n              aria-label=\"Quantity\"\r\n              aria-describedby=\"labelQuantity\"\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"input-group mb-2\">\r\n            <div className=\"input-group-prepend\">\r\n              <span className=\"input-group-text\" id=\"labelTicketPrice\">\r\n                ticket price (in ether)\r\n              </span>\r\n            </div>\r\n            <input\r\n              type=\"number\"\r\n              key=\"_ticketPrice\"\r\n              name=\"_ticketPrice\"\r\n              value={this.state._ticketPrice}\r\n              onChange={this.handleOnChange}\r\n              min=\"0\"\r\n              max=\"100\"\r\n              step=\"0.01\"\r\n              className=\"form-control\"\r\n              placeholder=\"Price of One Ticket\"\r\n              aria-label=\"Price of One Ticket\"\r\n              aria-describedby=\"labelTicketPrice\"\r\n              required\r\n            />\r\n          </div>\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-light\"\r\n            onClick={this.handleOnClick}\r\n          >\r\n            submit\r\n          </button>\r\n        </div>\r\n        <span className=\"card-footer font-weight-bold text-uppercase\">\r\n          {this.getTxStatus()}\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PurchaseTickets;\r\n"]},"metadata":{},"sourceType":"module"}