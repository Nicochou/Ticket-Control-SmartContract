{"ast":null,"code":"import _classCallCheck from \"D:\\\\Projets\\\\group-790626\\\\jobillet\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\Projets\\\\group-790626\\\\jobillet\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"D:\\\\Projets\\\\group-790626\\\\jobillet\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"D:\\\\Projets\\\\group-790626\\\\jobillet\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"D:\\\\Projets\\\\group-790626\\\\jobillet\\\\client\\\\src\\\\PurchaseInfo.jsx\";\nimport React, { Component } from \"react\";\n\nvar PurchaseInfo = /*#__PURE__*/function (_Component) {\n  _inherits(PurchaseInfo, _Component);\n\n  var _super = _createSuper(PurchaseInfo);\n\n  function PurchaseInfo() {\n    var _this;\n\n    _classCallCheck(this, PurchaseInfo);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      dataKey: null\n    };\n    _this.purchaseStateLabels = [\"0-COMPLETED\", \"1-CANCELLED\", \"2-REFUNDED\", \"3-CHECKED-IN\"];\n    return _this;\n  }\n\n  _createClass(PurchaseInfo, [{\n    key: \"fetchData\",\n    value: function fetchData() {\n      var Bileto = this.props.drizzle.contracts.Bileto;\n      var dataKey = Bileto.methods.fetchPurchaseInfo.cacheCall(this.props.purchaseId);\n      this.setState({\n        dataKey\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchData();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.purchaseId !== prevProps.purchaseId) {\n        this.fetchData();\n      }\n    }\n  }, {\n    key: \"formatWeiToEther\",\n    value: function formatWeiToEther(_amount) {\n      var _output = !_amount ? \"???\" : this.props.drizzle.web3.utils.fromWei(_amount.toString(), \"ether\");\n\n      _output += \" ETHER\";\n      return _output;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props$drizzleSt = this.props.drizzleState,\n          drizzleStatus = _this$props$drizzleSt.drizzleStatus,\n          web3 = _this$props$drizzleSt.web3;\n\n      if (!drizzleStatus.initialized || web3.status !== \"initialized\") {\n        return \"Loading...\";\n      }\n\n      var Bileto = this.props.drizzleState.contracts.Bileto;\n      var purchaseInfo = Bileto.fetchPurchaseInfo[this.state.dataKey];\n\n      if (!purchaseInfo || !purchaseInfo.value) {\n        return \"Loading...\";\n      }\n\n      var _purchaseInfo$value = purchaseInfo.value,\n          purchaseStatus = _purchaseInfo$value.purchaseStatus,\n          purchaseExternalId = _purchaseInfo$value.purchaseExternalId,\n          purchaseTimestamp = _purchaseInfo$value.purchaseTimestamp,\n          purchaseCustomer = _purchaseInfo$value.purchaseCustomer,\n          purchaseCustomerId = _purchaseInfo$value.purchaseCustomerId,\n          purchaseQuantity = _purchaseInfo$value.purchaseQuantity,\n          purchaseTotal = _purchaseInfo$value.purchaseTotal,\n          purchaseEventId = _purchaseInfo$value.purchaseEventId;\n      var timestamp = new Date(parseInt(purchaseTimestamp, 10));\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card shadow h-100\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"h5\", {\n        className: \"card-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 9\n        }\n      }, \"Event #\", purchaseEventId, \" - \", /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }\n      }, \"Purchase #\", this.props.purchaseId)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"list-group list-group-flush\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"li\", {\n        className: \"list-group-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 15\n        }\n      }, \"Status: \"), this.purchaseStateLabels[purchaseStatus]), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"list-group-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 15\n        }\n      }, \"Timestamp: \"), timestamp.toUTCString()), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"list-group-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 15\n        }\n      }, \"Customer: \"), purchaseCustomer), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"list-group-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 15\n        }\n      }, \"Customer ID: \"), /*#__PURE__*/React.createElement(\"small\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 15\n        }\n      }, purchaseCustomerId)), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"list-group-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 15\n        }\n      }, \"External ID: \"), /*#__PURE__*/React.createElement(\"small\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 15\n        }\n      }, purchaseExternalId)), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"list-group-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 15\n        }\n      }, \"# of Tickets on Purchase: \"), purchaseQuantity), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"list-group-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 15\n        }\n      }, \"Purchase Total: \"), this.formatWeiToEther(purchaseTotal)))));\n    }\n  }]);\n\n  return PurchaseInfo;\n}(Component);\n\nexport default PurchaseInfo;","map":{"version":3,"sources":["D:/Projets/group-790626/jobillet/client/src/PurchaseInfo.jsx"],"names":["React","Component","PurchaseInfo","state","dataKey","purchaseStateLabels","Bileto","props","drizzle","contracts","methods","fetchPurchaseInfo","cacheCall","purchaseId","setState","fetchData","prevProps","_amount","_output","web3","utils","fromWei","toString","drizzleState","drizzleStatus","initialized","status","purchaseInfo","value","purchaseStatus","purchaseExternalId","purchaseTimestamp","purchaseCustomer","purchaseCustomerId","purchaseQuantity","purchaseTotal","purchaseEventId","timestamp","Date","parseInt","toUTCString","formatWeiToEther"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nclass PurchaseInfo extends Component {\r\n  state = { dataKey: null };\r\n  purchaseStateLabels = [\r\n    \"0-COMPLETED\",\r\n    \"1-CANCELLED\",\r\n    \"2-REFUNDED\",\r\n    \"3-CHECKED-IN\"\r\n  ];\r\n\r\n  fetchData() {\r\n    const { Bileto } = this.props.drizzle.contracts;\r\n    const dataKey = Bileto.methods.fetchPurchaseInfo.cacheCall(\r\n      this.props.purchaseId\r\n    );\r\n\r\n    this.setState({ dataKey });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchData();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.purchaseId !== prevProps.purchaseId) {\r\n      this.fetchData();\r\n    }\r\n  }\r\n\r\n  formatWeiToEther(_amount) {\r\n    let _output = !_amount\r\n      ? \"???\"\r\n      : this.props.drizzle.web3.utils.fromWei(_amount.toString(), \"ether\");\r\n    _output += \" ETHER\";\r\n    return _output;\r\n  }\r\n\r\n  render() {\r\n    const { drizzleStatus, web3 } = this.props.drizzleState;\r\n    if (!drizzleStatus.initialized || web3.status !== \"initialized\") {\r\n      return \"Loading...\";\r\n    }\r\n\r\n    const { Bileto } = this.props.drizzleState.contracts;\r\n\r\n    const purchaseInfo = Bileto.fetchPurchaseInfo[this.state.dataKey];\r\n    if (!purchaseInfo || !purchaseInfo.value) {\r\n      return \"Loading...\";\r\n    }\r\n\r\n    const {\r\n      purchaseStatus,\r\n      purchaseExternalId,\r\n      purchaseTimestamp,\r\n      purchaseCustomer,\r\n      purchaseCustomerId,\r\n      purchaseQuantity,\r\n      purchaseTotal,\r\n      purchaseEventId\r\n    } = purchaseInfo.value;\r\n\r\n    const timestamp = new Date(parseInt(purchaseTimestamp, 10));\r\n\r\n    return (\r\n      <div className=\"card shadow h-100\">\r\n        <h5 className=\"card-header\">\r\n          Event #{purchaseEventId}\r\n          {\" - \"}\r\n          <strong>Purchase #{this.props.purchaseId}</strong>\r\n        </h5>\r\n        <div className=\"card-body\">\r\n          <ul className=\"list-group list-group-flush\">\r\n            <li className=\"list-group-item\">\r\n              <strong>Status: </strong>\r\n              {this.purchaseStateLabels[purchaseStatus]}\r\n            </li>\r\n            <li className=\"list-group-item\">\r\n              <strong>Timestamp: </strong>\r\n              {timestamp.toUTCString()}\r\n            </li>\r\n            <li className=\"list-group-item\">\r\n              <strong>Customer: </strong>\r\n              {purchaseCustomer}\r\n            </li>\r\n            <li className=\"list-group-item\">\r\n              <strong>Customer ID: </strong>\r\n              <small>{purchaseCustomerId}</small>\r\n            </li>\r\n            <li className=\"list-group-item\">\r\n              <strong>External ID: </strong>\r\n              <small>{purchaseExternalId}</small>\r\n            </li>\r\n            <li className=\"list-group-item\">\r\n              <strong># of Tickets on Purchase: </strong>\r\n              {purchaseQuantity}\r\n            </li>\r\n            <li className=\"list-group-item\">\r\n              <strong>Purchase Total: </strong>\r\n              {this.formatWeiToEther(purchaseTotal)}\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PurchaseInfo;\r\n"]},"metadata":{},"sourceType":"module"}