{"ast":null,"code":"import _classCallCheck from \"D:\\\\Projet\\\\ecole_etna\\\\final-project-feamcor\\\\bileto\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\Projet\\\\ecole_etna\\\\final-project-feamcor\\\\bileto\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"D:\\\\Projet\\\\ecole_etna\\\\final-project-feamcor\\\\bileto\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"D:\\\\Projet\\\\ecole_etna\\\\final-project-feamcor\\\\bileto\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"D:\\\\Projet\\\\ecole_etna\\\\final-project-feamcor\\\\bileto\\\\client\\\\src\\\\OpenStore.jsx\";\nimport React, { Component } from \"react\";\n\nvar OpenStore = /*#__PURE__*/function (_Component) {\n  _inherits(OpenStore, _Component);\n\n  var _super = _createSuper(OpenStore);\n\n  function OpenStore() {\n    var _this;\n\n    _classCallCheck(this, OpenStore);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      stackId: null\n    };\n\n    _this.handleOnClick = function (_event) {\n      var Bileto = _this.props.drizzle.contracts.Bileto;\n      var accounts = _this.props.drizzleState.accounts;\n      var stackId = Bileto.methods.openStore.cacheSend({\n        from: accounts[0]\n      });\n\n      _this.setState({\n        stackId\n      });\n    };\n\n    _this.getTxStatus = function () {\n      var _this$props$drizzleSt = _this.props.drizzleState,\n          transactions = _this$props$drizzleSt.transactions,\n          transactionStack = _this$props$drizzleSt.transactionStack;\n      var txHash = transactionStack[_this.state.stackId];\n      if (!txHash) return \"...\"; // console.log(transactions[txHash]);\n\n      return transactions[txHash].status;\n    };\n\n    return _this;\n  }\n\n  _createClass(OpenStore, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props$drizzleSt2 = this.props.drizzleState,\n          drizzleStatus = _this$props$drizzleSt2.drizzleStatus,\n          web3 = _this$props$drizzleSt2.web3;\n\n      if (!drizzleStatus.initialized || web3.status !== \"initialized\") {\n        return \"Loading...\";\n      }\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card shadow text-white bg-success text-center h-100\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 29,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-outline-light btn-block\",\n        onClick: this.handleOnClick,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 13\n        }\n      }, \"OPEN\"), \" store\")), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"card-body small\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 9\n        }\n      }, \"Enable, or resume, the store for handling of events and ticket purchases.\"), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"card-footer font-weight-bold text-uppercase\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 9\n        }\n      }, this.getTxStatus()));\n    }\n  }]);\n\n  return OpenStore;\n}(Component);\n\nexport default OpenStore;","map":{"version":3,"sources":["D:/Projet/ecole_etna/final-project-feamcor/bileto/client/src/OpenStore.jsx"],"names":["React","Component","OpenStore","state","stackId","handleOnClick","_event","Bileto","props","drizzle","contracts","accounts","drizzleState","methods","openStore","cacheSend","from","setState","getTxStatus","transactions","transactionStack","txHash","status","drizzleStatus","web3","initialized"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;;IAEMC,S;;;;;;;;;;;;;;;UACJC,K,GAAQ;AAAEC,MAAAA,OAAO,EAAE;AAAX,K;;UAERC,a,GAAgB,UAAAC,MAAM,EAAI;AAAA,UAChBC,MADgB,GACL,MAAKC,KAAL,CAAWC,OAAX,CAAmBC,SADd,CAChBH,MADgB;AAAA,UAEhBI,QAFgB,GAEH,MAAKH,KAAL,CAAWI,YAFR,CAEhBD,QAFgB;AAGxB,UAAMP,OAAO,GAAGG,MAAM,CAACM,OAAP,CAAeC,SAAf,CAAyBC,SAAzB,CAAmC;AAAEC,QAAAA,IAAI,EAAEL,QAAQ,CAAC,CAAD;AAAhB,OAAnC,CAAhB;;AACA,YAAKM,QAAL,CAAc;AAAEb,QAAAA;AAAF,OAAd;AACD,K;;UAEDc,W,GAAc,YAAM;AAAA,kCACyB,MAAKV,KAAL,CAAWI,YADpC;AAAA,UACVO,YADU,yBACVA,YADU;AAAA,UACIC,gBADJ,yBACIA,gBADJ;AAElB,UAAMC,MAAM,GAAGD,gBAAgB,CAAC,MAAKjB,KAAL,CAAWC,OAAZ,CAA/B;AACA,UAAI,CAACiB,MAAL,EAAa,OAAO,KAAP,CAHK,CAIlB;;AACA,aAAOF,YAAY,CAACE,MAAD,CAAZ,CAAqBC,MAA5B;AACD,K;;;;;;;6BAEQ;AAAA,mCACyB,KAAKd,KAAL,CAAWI,YADpC;AAAA,UACCW,aADD,0BACCA,aADD;AAAA,UACgBC,IADhB,0BACgBA,IADhB;;AAEP,UAAI,CAACD,aAAa,CAACE,WAAf,IAA8BD,IAAI,CAACF,MAAL,KAAgB,aAAlD,EAAiE;AAC/D,eAAO,YAAP;AACD;;AAED,0BACE;AAAK,QAAA,SAAS,EAAC,qDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AACE,QAAA,IAAI,EAAC,QADP;AAEE,QAAA,SAAS,EAAC,iCAFZ;AAGE,QAAA,OAAO,EAAE,KAAKjB,aAHhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALF,WADF,CADF,eAUE;AAAM,QAAA,SAAS,EAAC,iBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qFAVF,eAcE;AAAM,QAAA,SAAS,EAAC,6CAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAKa,WAAL,EADH,CAdF,CADF;AAoBD;;;;EA5CqBjB,S;;AA+CxB,eAAeC,SAAf","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nclass OpenStore extends Component {\r\n  state = { stackId: null };\r\n\r\n  handleOnClick = _event => {\r\n    const { Bileto } = this.props.drizzle.contracts;\r\n    const { accounts } = this.props.drizzleState;\r\n    const stackId = Bileto.methods.openStore.cacheSend({ from: accounts[0] });\r\n    this.setState({ stackId });\r\n  };\r\n\r\n  getTxStatus = () => {\r\n    const { transactions, transactionStack } = this.props.drizzleState;\r\n    const txHash = transactionStack[this.state.stackId];\r\n    if (!txHash) return \"...\";\r\n    // console.log(transactions[txHash]);\r\n    return transactions[txHash].status;\r\n  };\r\n\r\n  render() {\r\n    const { drizzleStatus, web3 } = this.props.drizzleState;\r\n    if (!drizzleStatus.initialized || web3.status !== \"initialized\") {\r\n      return \"Loading...\";\r\n    }\r\n\r\n    return (\r\n      <div className=\"card shadow text-white bg-success text-center h-100\">\r\n        <div className=\"card-header\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-outline-light btn-block\"\r\n            onClick={this.handleOnClick}\r\n          >\r\n            <strong>OPEN</strong> store\r\n          </button>\r\n        </div>\r\n        <span className=\"card-body small\">\r\n          Enable, or resume, the store for handling of events and ticket\r\n          purchases.\r\n        </span>\r\n        <span className=\"card-footer font-weight-bold text-uppercase\">\r\n          {this.getTxStatus()}\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default OpenStore;\r\n"]},"metadata":{},"sourceType":"module"}