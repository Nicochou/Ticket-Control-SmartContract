{"ast":null,"code":"import _classCallCheck from \"D:\\\\Projet\\\\ecole_etna\\\\final-project-feamcor\\\\bileto\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\Projet\\\\ecole_etna\\\\final-project-feamcor\\\\bileto\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"D:\\\\Projet\\\\ecole_etna\\\\final-project-feamcor\\\\bileto\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"D:\\\\Projet\\\\ecole_etna\\\\final-project-feamcor\\\\bileto\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"D:\\\\Projet\\\\ecole_etna\\\\final-project-feamcor\\\\bileto\\\\client\\\\src\\\\EventInfo.jsx\";\nimport React, { Component } from \"react\";\n\nvar EventInfo = /*#__PURE__*/function (_Component) {\n  _inherits(EventInfo, _Component);\n\n  var _super = _createSuper(EventInfo);\n\n  function EventInfo() {\n    var _this;\n\n    _classCallCheck(this, EventInfo);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      dataKey1: null,\n      dataKey2: null\n    };\n    _this.eventStateLabels = [\"0-CREATED\", \"1-SALES STARTED\", \"2-SALES SUSPENDED\", \"3-SALES FINISHED\", \"4-COMPLETED\", \"5-SETTLED\", \"6-CANCELLED\"];\n    return _this;\n  }\n\n  _createClass(EventInfo, [{\n    key: \"fetchData\",\n    value: function fetchData() {\n      var Bileto = this.props.drizzle.contracts.Bileto;\n      var dataKey1 = Bileto.methods.fetchEventInfo.cacheCall(this.props.eventId);\n      var dataKey2 = Bileto.methods.fetchEventSalesInfo.cacheCall(this.props.eventId);\n      this.setState({\n        dataKey1,\n        dataKey2\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchData();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.eventId !== prevProps.eventId) {\n        this.fetchData();\n      }\n    }\n  }, {\n    key: \"formatWeiToEther\",\n    value: function formatWeiToEther(_amount) {\n      var _output = !_amount ? \"???\" : this.props.drizzle.web3.utils.fromWei(_amount.toString(), \"ether\");\n\n      _output += \" ETHER\";\n      return _output;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props$drizzleSt = this.props.drizzleState,\n          drizzleStatus = _this$props$drizzleSt.drizzleStatus,\n          web3 = _this$props$drizzleSt.web3;\n\n      if (!drizzleStatus.initialized || web3.status !== \"initialized\") {\n        return \"Loading...\";\n      }\n\n      var Bileto = this.props.drizzleState.contracts.Bileto;\n      var eventInfo = Bileto.fetchEventInfo[this.state.dataKey1];\n\n      if (!eventInfo || !eventInfo.value) {\n        return \"Loading...\";\n      }\n\n      var eventSalesInfo = Bileto.fetchEventSalesInfo[this.state.dataKey2];\n\n      if (!eventSalesInfo || !eventSalesInfo.value) {\n        return \"Loading...\";\n      }\n\n      var _eventInfo$value = eventInfo.value,\n          eventStatus = _eventInfo$value.eventStatus,\n          eventExternalId = _eventInfo$value.eventExternalId,\n          eventOrganizer = _eventInfo$value.eventOrganizer,\n          eventName = _eventInfo$value.eventName,\n          eventStoreIncentive = _eventInfo$value.eventStoreIncentive,\n          eventTicketPrice = _eventInfo$value.eventTicketPrice,\n          eventTicketsOnSale = _eventInfo$value.eventTicketsOnSale;\n      var _eventSalesInfo$value = eventSalesInfo.value,\n          eventTicketsSold = _eventSalesInfo$value.eventTicketsSold,\n          eventTicketsLeft = _eventSalesInfo$value.eventTicketsLeft,\n          eventTicketsCancelled = _eventSalesInfo$value.eventTicketsCancelled,\n          eventTicketsRefunded = _eventSalesInfo$value.eventTicketsRefunded,\n          eventTicketsCheckedIn = _eventSalesInfo$value.eventTicketsCheckedIn,\n          eventBalance = _eventSalesInfo$value.eventBalance,\n          eventRefundableBalance = _eventSalesInfo$value.eventRefundableBalance;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card shadow h-100\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"h5\", {\n        className: \"card-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 9\n        }\n      }, \"Event #\", this.props.eventId, \": \", /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 40\n        }\n      }, eventName)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"list-group list-group-flush\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"li\", {\n        className: \"list-group-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 15\n        }\n      }, \"Status: \"), this.eventStateLabels[eventStatus]), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"list-group-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 15\n        }\n      }, \"Organizer: \"), eventOrganizer), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"list-group-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 15\n        }\n      }, \"External ID: \"), /*#__PURE__*/React.createElement(\"small\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 15\n        }\n      }, eventExternalId))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"list-group list-group-flush\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"li\", {\n        className: \"list-group-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 19\n        }\n      }, \"# of Tickets on Sale (initial): \"), eventTicketsOnSale), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"list-group-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 19\n        }\n      }, \"Ticket Price: \"), this.formatWeiToEther(eventTicketPrice)), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"list-group-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 19\n        }\n      }, \"Store Incentive (%): \"), parseInt(eventStoreIncentive, 10) / 100), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"list-group-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 19\n        }\n      }, \"Total Balance: \"), this.formatWeiToEther(eventBalance)), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"list-group-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 19\n        }\n      }, \"Refundable Balance: \"), this.formatWeiToEther(eventRefundableBalance)))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"list-group list-group-flush\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"li\", {\n        className: \"list-group-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 19\n        }\n      }, \"# of Tickets Sold: \"), eventTicketsSold), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"list-group-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 19\n        }\n      }, \"# of Tickets Left: \"), eventTicketsLeft), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"list-group-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 19\n        }\n      }, \"# of Tickets Cancelled: \"), eventTicketsCancelled), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"list-group-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 19\n        }\n      }, \"# of Tickets Checked In: \"), eventTicketsCheckedIn), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"list-group-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 19\n        }\n      }, \"# of Tickets Refunded: \"), eventTicketsRefunded))))));\n    }\n  }]);\n\n  return EventInfo;\n}(Component);\n\nexport default EventInfo;","map":{"version":3,"sources":["D:/Projet/ecole_etna/final-project-feamcor/bileto/client/src/EventInfo.jsx"],"names":["React","Component","EventInfo","state","dataKey1","dataKey2","eventStateLabels","Bileto","props","drizzle","contracts","methods","fetchEventInfo","cacheCall","eventId","fetchEventSalesInfo","setState","fetchData","prevProps","_amount","_output","web3","utils","fromWei","toString","drizzleState","drizzleStatus","initialized","status","eventInfo","value","eventSalesInfo","eventStatus","eventExternalId","eventOrganizer","eventName","eventStoreIncentive","eventTicketPrice","eventTicketsOnSale","eventTicketsSold","eventTicketsLeft","eventTicketsCancelled","eventTicketsRefunded","eventTicketsCheckedIn","eventBalance","eventRefundableBalance","formatWeiToEther","parseInt"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nclass EventInfo extends Component {\r\n  state = { dataKey1: null, dataKey2: null };\r\n  eventStateLabels = [\r\n    \"0-CREATED\",\r\n    \"1-SALES STARTED\",\r\n    \"2-SALES SUSPENDED\",\r\n    \"3-SALES FINISHED\",\r\n    \"4-COMPLETED\",\r\n    \"5-SETTLED\",\r\n    \"6-CANCELLED\"\r\n  ];\r\n\r\n  fetchData() {\r\n    const { Bileto } = this.props.drizzle.contracts;\r\n    const dataKey1 = Bileto.methods.fetchEventInfo.cacheCall(\r\n      this.props.eventId\r\n    );\r\n    const dataKey2 = Bileto.methods.fetchEventSalesInfo.cacheCall(\r\n      this.props.eventId\r\n    );\r\n    this.setState({ dataKey1, dataKey2 });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchData();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.eventId !== prevProps.eventId) {\r\n      this.fetchData();\r\n    }\r\n  }\r\n\r\n  formatWeiToEther(_amount) {\r\n    let _output = !_amount\r\n      ? \"???\"\r\n      : this.props.drizzle.web3.utils.fromWei(_amount.toString(), \"ether\");\r\n    _output += \" ETHER\";\r\n    return _output;\r\n  }\r\n\r\n  render() {\r\n    const { drizzleStatus, web3 } = this.props.drizzleState;\r\n    if (!drizzleStatus.initialized || web3.status !== \"initialized\") {\r\n      return \"Loading...\";\r\n    }\r\n\r\n    const { Bileto } = this.props.drizzleState.contracts;\r\n\r\n    const eventInfo = Bileto.fetchEventInfo[this.state.dataKey1];\r\n    if (!eventInfo || !eventInfo.value) {\r\n      return \"Loading...\";\r\n    }\r\n\r\n    const eventSalesInfo = Bileto.fetchEventSalesInfo[this.state.dataKey2];\r\n    if (!eventSalesInfo || !eventSalesInfo.value) {\r\n      return \"Loading...\";\r\n    }\r\n\r\n    const {\r\n      eventStatus,\r\n      eventExternalId,\r\n      eventOrganizer,\r\n      eventName,\r\n      eventStoreIncentive,\r\n      eventTicketPrice,\r\n      eventTicketsOnSale\r\n    } = eventInfo.value;\r\n\r\n    const {\r\n      eventTicketsSold,\r\n      eventTicketsLeft,\r\n      eventTicketsCancelled,\r\n      eventTicketsRefunded,\r\n      eventTicketsCheckedIn,\r\n      eventBalance,\r\n      eventRefundableBalance\r\n    } = eventSalesInfo.value;\r\n\r\n    return (\r\n      <div className=\"card shadow h-100\">\r\n        <h5 className=\"card-header\">\r\n          Event #{this.props.eventId}: <strong>{eventName}</strong>\r\n        </h5>\r\n        <div className=\"card-body\">\r\n          <ul className=\"list-group list-group-flush\">\r\n            <li className=\"list-group-item\">\r\n              <strong>Status: </strong>\r\n              {this.eventStateLabels[eventStatus]}\r\n            </li>\r\n            <li className=\"list-group-item\">\r\n              <strong>Organizer: </strong>\r\n              {eventOrganizer}\r\n            </li>\r\n            <li className=\"list-group-item\">\r\n              <strong>External ID: </strong>\r\n              <small>{eventExternalId}</small>\r\n            </li>\r\n          </ul>\r\n          <div className=\"row\">\r\n            <div className=\"col-md-6\">\r\n              <ul className=\"list-group list-group-flush\">\r\n                <li className=\"list-group-item\">\r\n                  <strong># of Tickets on Sale (initial): </strong>\r\n                  {eventTicketsOnSale}\r\n                </li>\r\n                <li className=\"list-group-item\">\r\n                  <strong>Ticket Price: </strong>\r\n                  {this.formatWeiToEther(eventTicketPrice)}\r\n                </li>\r\n                <li className=\"list-group-item\">\r\n                  <strong>Store Incentive (%): </strong>\r\n                  {parseInt(eventStoreIncentive, 10) / 100}\r\n                </li>\r\n                <li className=\"list-group-item\">\r\n                  <strong>Total Balance: </strong>\r\n                  {this.formatWeiToEther(eventBalance)}\r\n                </li>\r\n                <li className=\"list-group-item\">\r\n                  <strong>Refundable Balance: </strong>\r\n                  {this.formatWeiToEther(eventRefundableBalance)}\r\n                </li>\r\n              </ul>\r\n            </div>\r\n            <div className=\"col-md-6\">\r\n              <ul className=\"list-group list-group-flush\">\r\n                <li className=\"list-group-item\">\r\n                  <strong># of Tickets Sold: </strong>\r\n                  {eventTicketsSold}\r\n                </li>\r\n                <li className=\"list-group-item\">\r\n                  <strong># of Tickets Left: </strong>\r\n                  {eventTicketsLeft}\r\n                </li>\r\n                <li className=\"list-group-item\">\r\n                  <strong># of Tickets Cancelled: </strong>\r\n                  {eventTicketsCancelled}\r\n                </li>\r\n                <li className=\"list-group-item\">\r\n                  <strong># of Tickets Checked In: </strong>\r\n                  {eventTicketsCheckedIn}\r\n                </li>\r\n                <li className=\"list-group-item\">\r\n                  <strong># of Tickets Refunded: </strong>\r\n                  {eventTicketsRefunded}\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EventInfo;\r\n"]},"metadata":{},"sourceType":"module"}